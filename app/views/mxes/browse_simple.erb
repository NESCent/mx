<style type="text/css">
	td.otu_name { 
		text-align: right;	
	}
	.popover-title {
		font-weight: bold;
	}
</style>

<div style="margin: 5%">
	<div class="row">
		<table class="table table-striped table-condensed">
			<thead><tr><th>&nbsp;</th><% @codings[:chrs].each do |chr| -%><th class="chr_name"><%= chr.short_name %></th><% end -%></tr></thead>
			<tbody>
			<% @codings[:grid].transpose.each_with_index do |chr_codings, i| %>
			<tr>
				<td class="otu_name"><%= @codings[:otus][i].name %></td>
				<% chr_codings.each_with_index do |coding_array, j| %>
				<td>
					<% if coding_array.empty? %>
							0
						<% else %>
							<a href="#" 
							   class="coding_popover" 
							   rel="popover"
							   data-content="<ol><% coding_array.each do |coding| -%><li><%= coding.chr_state_name %> <%= coding.ref.cached_display_name unless coding.ref.nil? %></li><% end %></ol>"
							   data-original-title="<%= coding_array.first.chr.name -%>">
							   <%= coding_array.count.to_s -%>
							   </a>
					<% end %>
				<% end %>
			</tr>
			<% end %>
			</tbody>
		</table>
	</div>
</div>

<script>
	$('.coding_popover').popover({trigger: 'hover', html: true, placement: 'bottom', delay: {hide: 100} });
</script>
